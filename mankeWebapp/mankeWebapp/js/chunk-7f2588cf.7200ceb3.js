(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f2588cf"],{1175:function(e,t,n){},"2fcb":function(e,t,n){},"4cf9":function(e,t,n){},"82a8":function(e,t,n){"use strict";var a=n("c31d"),i=n("d282"),s=n("48f4"),o=n("9884"),r=n("b650"),l=Object(i["a"])("goods-action-button"),c=l[0],u=l[1];t["a"]=c({mixins:[Object(o["a"])("vanGoodsAction")],props:Object(a["a"])({},s["c"],{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var e=this.parent&&this.parent.children[this.index-1];return!e||e.$options.name!==this.$options.name},isLast:function(){var e=this.parent&&this.parent.children[this.index+1];return!e||e.$options.name!==this.$options.name}},methods:{onClick:function(e){this.$emit("click",e),Object(s["b"])(this.$router,this)}},render:function(){var e=arguments[0];return e(r["a"],{class:u([{first:this.isFirst,last:this.isLast},this.type]),attrs:{size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}})},"9c5f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-address-edit",{attrs:{"area-list":e.areaList,"show-postal":"","show-delete":"","show-set-default":"","show-search-result":"","search-result":e.searchResult,"area-columns-placeholder":["请选择","请选择","请选择"]},on:{save:e.onSave,delete:e.onDelete,"change-detail":e.onChangeDetail}})},i=[],s=(n("e7e5"),n("d399")),o=(n("68ef"),n("a71a"),n("9d70"),n("3743"),n("1a04"),n("1146"),n("4d75"),n("e3b3"),n("d9d2"),n("bc1b"),n("1175"),n("b258"),n("a526"),n("4cf9"),n("2fcb"),n("b7e7"),n("c31d")),r=n("d282"),l=n("a142");function c(e){return e=e.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(e)||/^0[0-9-]{10,13}$/.test(e)}var u=n("1b10"),h=n("f253"),d=Object(r["a"])("area"),f=d[0],m=d[1],p="000000";function g(e){return"9"===e[0]}function v(e,t){var n=e.$slots,a=e.$scopedSlots,i={};return t.forEach((function(e){a[e]?i[e]=a[e]:n[e]&&(i[e]=function(){return n[e]})})),i}var b,y=f({props:Object(o["a"])({},u["b"],{value:String,areaList:{type:Object,default:function(){return{}}},columnsNum:{type:[Number,String],default:3},isOverseaCode:{type:Function,default:g},columnsPlaceholder:{type:Array,default:function(){return[]}}}),data:function(){return{code:this.value,columns:[{values:[]},{values:[]},{values:[]}]}},computed:{province:function(){return this.areaList.province_list||{}},city:function(){return this.areaList.city_list||{}},county:function(){return this.areaList.county_list||{}},displayColumns:function(){return this.columns.slice(0,+this.columnsNum)},placeholderMap:function(){return{province:this.columnsPlaceholder[0]||"",city:this.columnsPlaceholder[1]||"",county:this.columnsPlaceholder[2]||""}}},watch:{value:function(e){this.code=e,this.setValues()},areaList:{deep:!0,handler:"setValues"},columnsNum:function(){var e=this;this.$nextTick((function(){e.setValues()}))}},mounted:function(){this.setValues()},methods:{getList:function(e,t){var n=[];if("province"!==e&&!t)return n;var a=this[e];if(n=Object.keys(a).map((function(e){return{code:e,name:a[e]}})),t&&(this.isOverseaCode(t)&&"city"===e&&(t="9"),n=n.filter((function(e){return 0===e.code.indexOf(t)}))),this.placeholderMap[e]&&n.length){var i="";"city"===e?i=p.slice(2,4):"county"===e&&(i=p.slice(4,6)),n.unshift({code:""+t+i,name:this.placeholderMap[e]})}return n},getIndex:function(e,t){var n="province"===e?2:"city"===e?4:6,a=this.getList(e,t.slice(0,n-2));this.isOverseaCode(t)&&"province"===e&&(n=1),t=t.slice(0,n);for(var i=0;i<a.length;i++)if(a[i].code.slice(0,n)===t)return i;return 0},parseOutputValues:function(e){var t=this;return e.map((function(e,n){return e?(e=JSON.parse(JSON.stringify(e)),e.code&&e.name!==t.columnsPlaceholder[n]||(e.code="",e.name=""),e):e}))},onChange:function(e,t,n){this.code=t[n].code,this.setValues();var a=this.parseOutputValues(e.getValues());this.$emit("change",e,a,n)},onConfirm:function(e,t){e=this.parseOutputValues(e),this.setValues(),this.$emit("confirm",e,t)},getDefaultCode:function(){if(this.columnsPlaceholder.length)return p;var e=Object.keys(this.county);if(e[0])return e[0];var t=Object.keys(this.city);return t[0]?t[0]:""},setValues:function(){var e=this.code;e||(e=this.getDefaultCode());var t=this.$refs.picker,n=this.getList("province"),a=this.getList("city",e.slice(0,2));t&&(t.setColumnValues(0,n),t.setColumnValues(1,a),a.length&&"00"===e.slice(2,4)&&!this.isOverseaCode(e)&&(e=a[0].code),t.setColumnValues(2,this.getList("county",e.slice(0,4))),t.setIndexes([this.getIndex("province",e),this.getIndex("city",e),this.getIndex("county",e)]))},getValues:function(){var e=this.$refs.picker,t=e?e.getValues().filter((function(e){return!!e})):[];return t=this.parseOutputValues(t),t},getArea:function(){var e=this.getValues(),t={code:"",country:"",province:"",city:"",county:""};if(!e.length)return t;var n=e.map((function(e){return e.name})),a=e.filter((function(e){return!!e.code}));return t.code=a.length?a[a.length-1].code:"",this.isOverseaCode(t.code)?(t.country=n[1]||"",t.province=n[2]||""):(t.province=n[0]||"",t.city=n[1]||"",t.county=n[2]||""),t},reset:function(e){this.code=e||"",this.setValues()}},render:function(){var e=arguments[0],t=Object(o["a"])({},this.$listeners,{change:this.onChange,confirm:this.onConfirm});return e(h["a"],{ref:"picker",class:m(),attrs:{showToolbar:!0,valueKey:"name",title:this.title,loading:this.loading,columns:this.displayColumns,itemHeight:this.itemHeight,swipeDuration:this.swipeDuration,visibleItemCount:this.visibleItemCount,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText},scopedSlots:v(this,["title","columns-top","columns-bottom"]),on:Object(o["a"])({},t)})}}),C=n("7744"),w=n("565f"),B=n("e41f"),O=n("b650"),S=n("2b0e"),k=n("2638"),$=n.n(k),x=n("ea8e"),D=n("b1d2"),j=n("6605"),A=n("bb33"),V=n("82a8"),L=Object(r["a"])("dialog"),R=L[0],P=L[1],T=L[2],F=R({mixins:[Object(j["a"])()],props:{title:String,theme:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,overlay:{type:Boolean,default:!0},allowHtml:{type:Boolean,default:!0},transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(e){var t=this;this.$emit(e),this.value&&(this.beforeClose?(this.loading[e]=!0,this.beforeClose(e,(function(n){!1!==n&&t.loading[e]&&t.onClose(e),t.loading.confirm=!1,t.loading.cancel=!1}))):this.onClose(e))},onClose:function(e){this.close(),this.callback&&this.callback(e)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")},genRoundButtons:function(){var e=this,t=this.$createElement;return t(A["a"],{class:P("footer")},[this.showCancelButton&&t(V["a"],{attrs:{size:"large",type:"warning",text:this.cancelButtonText||T("cancel"),color:this.cancelButtonColor,loading:this.loading.cancel},class:P("cancel"),on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&t(V["a"],{attrs:{size:"large",type:"danger",text:this.confirmButtonText||T("confirm"),color:this.confirmButtonColor,loading:this.loading.confirm},class:P("confirm"),on:{click:function(){e.handleAction("confirm")}}})])},genButtons:function(){var e,t=this,n=this.$createElement,a=this.showCancelButton&&this.showConfirmButton;return n("div",{class:[D["e"],P("footer")]},[this.showCancelButton&&n(O["a"],{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||T("cancel")},class:P("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){t.handleAction("cancel")}}}),this.showConfirmButton&&n(O["a"],{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||T("confirm")},class:[P("confirm"),(e={},e[D["c"]]=a,e)],style:{color:this.confirmButtonColor},on:{click:function(){t.handleAction("confirm")}}})])},genContent:function(e,t){var n=this.$createElement;if(t)return n("div",{class:P("content")},[t]);var a=this.message,i=this.messageAlign;if(a){var s,o,r={class:P("message",(s={"has-title":e},s[i]=i,s)),domProps:(o={},o[this.allowHtml?"innerHTML":"textContent"]=a,o)};return n("div",{class:P("content")},[n("div",$()([{},r]))])}}},render:function(){var e=arguments[0];if(this.shouldRender){var t=this.message,n=this.slots(),a=this.slots("title")||this.title,i=a&&e("div",{class:P("header",{isolated:!t&&!n})},[a]);return e("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||t},class:[P([this.theme]),this.className],style:{width:Object(x["a"])(this.width)}},[i,this.genContent(a,n),"round-button"===this.theme?this.genRoundButtons():this.genButtons()])])}}});function M(e){return document.body.contains(e)}function E(){b&&b.$destroy(),b=new(S["a"].extend(F))({el:document.createElement("div"),propsData:{lazyRender:!1}}),b.$on("input",(function(e){b.value=e}))}function I(e){return l["g"]?Promise.resolve():new Promise((function(t,n){b&&M(b.$el)||E(),Object(o["a"])(b,I.currentOptions,e,{resolve:t,reject:n})}))}I.defaultOptions={value:!0,title:"",width:"",theme:null,message:"",overlay:!0,className:"",allowHtml:!0,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,callback:function(e){b["confirm"===e?"resolve":"reject"](e)}},I.alert=I,I.confirm=function(e){return I(Object(o["a"])({showCancelButton:!0},e))},I.close=function(){b&&(b.value=!1)},I.setDefaultOptions=function(e){Object(o["a"])(I.currentOptions,e)},I.resetDefaultOptions=function(){I.currentOptions=Object(o["a"])({},I.defaultOptions)},I.resetDefaultOptions(),I.install=function(){S["a"].use(F)},I.Component=F,S["a"].prototype.$dialog=I;var N=I,z=n("32d7"),H=Object(r["a"])("address-edit-detail"),_=H[0],J=H[1],G=H[2],K=Object(z["a"])(),q=_({props:{value:String,errorMessage:String,focused:Boolean,detailRows:[Number,String],searchResult:Array,detailMaxlength:[Number,String],showSearchResult:Boolean},computed:{shouldShowSearchResult:function(){return this.focused&&this.searchResult&&this.showSearchResult}},methods:{onSelect:function(e){this.$emit("select-search",e),this.$emit("input",((e.address||"")+" "+(e.name||"")).trim())},onFinish:function(){this.$refs.field.blur()},genFinish:function(){var e=this.$createElement,t=this.value&&this.focused&&K;if(t)return e("div",{class:J("finish"),on:{click:this.onFinish}},[G("complete")])},genSearchResult:function(){var e=this,t=this.$createElement,n=this.value,a=this.shouldShowSearchResult,i=this.searchResult;if(a)return i.map((function(a){return t(C["a"],{key:a.name+a.address,attrs:{clickable:!0,border:!1,icon:"location-o",label:a.address},class:J("search-item"),on:{click:function(){e.onSelect(a)}},scopedSlots:{title:function(){if(a.name){var e=a.name.replace(n,"<span class="+J("keyword")+">"+n+"</span>");return t("div",{domProps:{innerHTML:e}})}}}})}))}},render:function(){var e=arguments[0];return e(C["a"],{class:J()},[e(w["a"],{attrs:{autosize:!0,rows:this.detailRows,clearable:!K,type:"textarea",value:this.value,errorMessage:this.errorMessage,border:!this.shouldShowSearchResult,label:G("label"),maxlength:this.detailMaxlength,placeholder:G("placeholder")},ref:"field",scopedSlots:{icon:this.genFinish},on:Object(o["a"])({},this.$listeners)}),this.genSearchResult()])}}),Q={size:[Number,String],value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1}},U=n("78eb"),W=n("543e"),X=Object(r["a"])("switch"),Y=X[0],Z=X[1],ee=Y({mixins:[U["a"]],props:Q,computed:{checked:function(){return this.value===this.activeValue},style:function(){return{fontSize:Object(x["a"])(this.size),backgroundColor:this.checked?this.activeColor:this.inactiveColor}}},methods:{onClick:function(e){if(this.$emit("click",e),!this.disabled&&!this.loading){var t=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",t),this.$emit("change",t)}},genLoading:function(){var e=this.$createElement;if(this.loading){var t=this.checked?this.activeColor:this.inactiveColor;return e(W["a"],{class:Z("loading"),attrs:{color:t}})}}},render:function(){var e=arguments[0],t=this.checked,n=this.loading,a=this.disabled;return e("div",{class:Z({on:t,loading:n,disabled:a}),attrs:{role:"switch","aria-checked":String(t)},style:this.style,on:{click:this.onClick}},[e("div",{class:Z("node")},[this.genLoading()])])}}),te=Object(r["a"])("address-edit"),ne=te[0],ae=te[1],ie=te[2],se={name:"",tel:"",country:"",province:"",city:"",county:"",areaCode:"",postalCode:"",addressDetail:"",isDefault:!1};function oe(e){return/^\d{6}$/.test(e)}var re=ne({props:{areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showDelete:Boolean,showPostal:Boolean,searchResult:Array,telMaxlength:[Number,String],showSetDefault:Boolean,saveButtonText:String,areaPlaceholder:String,deleteButtonText:String,showSearchResult:Boolean,showArea:{type:Boolean,default:!0},showDetail:{type:Boolean,default:!0},disableArea:Boolean,detailRows:{type:[Number,String],default:1},detailMaxlength:{type:[Number,String],default:200},addressInfo:{type:Object,default:function(){return Object(o["a"])({},se)}},telValidator:{type:Function,default:c},postalValidator:{type:Function,default:oe},areaColumnsPlaceholder:{type:Array,default:function(){return[]}}},data:function(){return{data:{},showAreaPopup:!1,detailFocused:!1,errorInfo:{tel:"",name:"",areaCode:"",postalCode:"",addressDetail:""}}},computed:{areaListLoaded:function(){return Object(l["e"])(this.areaList)&&Object.keys(this.areaList).length},areaText:function(){var e=this.data,t=e.country,n=e.province,a=e.city,i=e.county,s=e.areaCode;if(s){var o=[t,n,a,i];return n&&n===a&&o.splice(1,1),o.filter((function(e){return e})).join("/")}return""},hideBottomFields:function(){var e=this.searchResult;return e&&e.length&&this.detailFocused}},watch:{addressInfo:{handler:function(e){this.data=Object(o["a"])({},se,e),this.setAreaCode(e.areaCode)},deep:!0,immediate:!0},areaList:function(){this.setAreaCode(this.data.areaCode)}},methods:{onFocus:function(e){this.errorInfo[e]="",this.detailFocused="addressDetail"===e,this.$emit("focus",e)},onChangeDetail:function(e){this.data.addressDetail=e,this.$emit("change-detail",e)},onAreaConfirm:function(e){e=e.filter((function(e){return!!e})),e.some((function(e){return!e.code}))?Object(s["a"])(ie("areaEmpty")):(this.showAreaPopup=!1,this.assignAreaValues(),this.$emit("change-area",e))},assignAreaValues:function(){var e=this.$refs.area;if(e){var t=e.getArea();t.areaCode=t.code,delete t.code,Object(o["a"])(this.data,t)}},onSave:function(){var e=this,t=["name","tel"];this.showArea&&t.push("areaCode"),this.showDetail&&t.push("addressDetail"),this.showPostal&&t.push("postalCode");var n=t.every((function(t){var n=e.getErrorMessage(t);return n&&(e.errorInfo[t]=n),!n}));n&&!this.isSaving&&this.$emit("save",this.data)},getErrorMessage:function(e){var t=String(this.data[e]||"").trim();if(this.validator){var n=this.validator(e,t);if(n)return n}switch(e){case"name":return t?"":ie("nameEmpty");case"tel":return this.telValidator(t)?"":ie("telInvalid");case"areaCode":return t?"":ie("areaEmpty");case"addressDetail":return t?"":ie("addressEmpty");case"postalCode":return t&&!this.postalValidator(t)?ie("postalEmpty"):""}},onDelete:function(){var e=this;N.confirm({title:ie("confirmDelete")}).then((function(){e.$emit("delete",e.data)})).catch((function(){e.$emit("cancel-delete",e.data)}))},getArea:function(){return this.$refs.area?this.$refs.area.getValues():[]},setAreaCode:function(e){this.data.areaCode=e||"",e&&this.$nextTick(this.assignAreaValues)},setAddressDetail:function(e){this.data.addressDetail=e},onDetailBlur:function(){var e=this;setTimeout((function(){e.detailFocused=!1}))},genSetDefaultCell:function(e){var t=this;if(this.showSetDefault){var n={"right-icon":function(){return e(ee,{attrs:{size:"24"},on:{change:function(e){t.$emit("change-default",e)}},model:{value:t.data.isDefault,callback:function(e){t.$set(t.data,"isDefault",e)}}})}};return e(C["a"],{directives:[{name:"show",value:!this.hideBottomFields}],attrs:{center:!0,title:ie("defaultAddress")},class:ae("default"),scopedSlots:n})}return e()}},render:function(e){var t=this,n=this.data,a=this.errorInfo,i=this.disableArea,s=this.hideBottomFields,o=function(e){return function(){return t.onFocus(e)}};return e("div",{class:ae()},[e("div",{class:ae("fields")},[e(w["a"],{attrs:{clearable:!0,label:ie("name"),placeholder:ie("namePlaceholder"),errorMessage:a.name},on:{focus:o("name")},model:{value:n.name,callback:function(e){t.$set(n,"name",e)}}}),e(w["a"],{attrs:{clearable:!0,type:"tel",label:ie("tel"),maxlength:this.telMaxlength,placeholder:ie("telPlaceholder"),errorMessage:a.tel},on:{focus:o("tel")},model:{value:n.tel,callback:function(e){t.$set(n,"tel",e)}}}),e(w["a"],{directives:[{name:"show",value:this.showArea}],attrs:{readonly:!0,clickable:!i,label:ie("area"),placeholder:this.areaPlaceholder||ie("areaPlaceholder"),errorMessage:a.areaCode,rightIcon:i?null:"arrow",value:this.areaText},on:{focus:o("areaCode"),click:function(){t.$emit("click-area"),t.showAreaPopup=!i}}}),e(q,{directives:[{name:"show",value:this.showDetail}],attrs:{focused:this.detailFocused,value:n.addressDetail,errorMessage:a.addressDetail,detailRows:this.detailRows,detailMaxlength:this.detailMaxlength,searchResult:this.searchResult,showSearchResult:this.showSearchResult},on:{focus:o("addressDetail"),blur:this.onDetailBlur,input:this.onChangeDetail,"select-search":function(e){t.$emit("select-search",e)}}}),this.showPostal&&e(w["a"],{directives:[{name:"show",value:!s}],attrs:{type:"tel",maxlength:"6",label:ie("postal"),placeholder:ie("postal"),errorMessage:a.postalCode},on:{focus:o("postalCode")},model:{value:n.postalCode,callback:function(e){t.$set(n,"postalCode",e)}}}),this.slots()]),this.genSetDefaultCell(e),e("div",{directives:[{name:"show",value:!s}],class:ae("buttons")},[e(O["a"],{attrs:{block:!0,round:!0,loading:this.isSaving,type:"danger",text:this.saveButtonText||ie("save")},on:{click:this.onSave}}),this.showDelete&&e(O["a"],{attrs:{block:!0,round:!0,loading:this.isDeleting,text:this.deleteButtonText||ie("delete")},on:{click:this.onDelete}})]),e(B["a"],{attrs:{round:!0,position:"bottom",lazyRender:!1,getContainer:"body"},model:{value:t.showAreaPopup,callback:function(e){t.showAreaPopup=e}}},[e(y,{ref:"area",attrs:{value:n.areaCode,loading:!this.areaListLoaded,areaList:this.areaList,columnsPlaceholder:this.areaColumnsPlaceholder},on:{confirm:this.onAreaConfirm,cancel:function(){t.showAreaPopup=!1}}})])])}});S["a"].use(re);var le={data:function(){return{areaList:areaList,searchResult:[]}},methods:{onSave:function(){Object(s["a"])("save")},onDelete:function(){Object(s["a"])("delete")},onChangeDetail:function(e){this.searchResult=e?[{name:"黄龙万科中心",address:"杭州市西湖区"}]:[]}}},ce=le,ue=n("2877"),he=Object(ue["a"])(ce,a,i,!1,null,null,null);t["default"]=he.exports},b7e7:function(e,t,n){},bb33:function(e,t,n){"use strict";var a=n("d282"),i=n("9884"),s=Object(a["a"])("goods-action"),o=s[0],r=s[1];t["a"]=o({mixins:[Object(i["b"])("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var e=arguments[0];return e("div",{class:r({unfit:!this.safeAreaInsetBottom})},[this.slots()])}})},d9d2:function(e,t,n){}}]);
//# sourceMappingURL=chunk-7f2588cf.7200ceb3.js.map